<!DOCTYPE html>
<html>
<head>
<title>Labirinto</title>
<style>
body {
  margin: 0;
  background-color: #f0f0f0;
  font-family: Arial;
}
#gameContainer {
  position: relative;
  width: 800px;
  height: 600px;
  margin: 20px auto;
  background-image: url('myBackground01.jpg');
  background-size: cover;
  background-position: center;
  border: 3px solid #333;
}
#player {
  position: absolute;
  width: 15px;
  height: 15px;
  background-color: blue;
  border: 2px solid darkblue;
  border-radius: 3px;
  left: 30px;
  top: 150px;
  z-index: 10;
}
#goal {
  position: absolute;
  width: 40px;
  height: 40px;
  background-color: rgba(0, 255, 0, 0.7);
  border: 3px solid darkgreen;
  border-radius: 5px;
  right: 30px;
  bottom: 30px;
  z-index: 10;
}
.wall {
  position: absolute;
  background-color: rgba(255, 0, 0, 0.1); /* Rosso semi-trasparente per vedere dove sono */
  pointer-events: none;
}
#controls {
  text-align: center;
  padding: 20px;
}
button {
  margin: 5px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}
</style>
</head>
<body>
<h1 style="text-align: center; color: red;">T4A04 Maze by Fred</h1>

<div id="controls">
  <div style="margin-bottom: 10px;">
    <strong>Usa WASD o ‚Üë‚Üê‚Üì‚Üí</strong>
  </div>
  <div>
    <button onclick="move(0, -5)">‚Üë Up (W)</button>
  </div>
  <div>
    <button onclick="move(-5, 0)">‚Üê Left (A)</button>
    <button onclick="move(0, 5)">‚Üì Down (S)</button>
    <button onclick="move(5, 0)">‚Üí Right (D)</button>
  </div>
  <div style="margin-top: 10px;">
    <small>I muri rossi semi-trasparenti mostrano le hitbox. Posizionali sui muri neri dell'immagine!</small>
  </div>
</div>

<div id="gameContainer">
  <div id="player"></div>
  <div id="goal"></div>
  
  <!-- METTI QUI I TUOI MURI - Posizionali sopra i muri neri dell'immagine -->
  <!-- Esempio: Muro verticale a sinistra -->
  <div class="wall" style="left: 120px; top: 0; width: 20px; height: 250px;"></div>
  
  <!-- Esempio: Muro orizzontale in alto -->
  <div class="wall" style="left: 0; top: 120px; width: 300px; height: 20px;"></div>
  
  <!-- AGGIUNGI ALTRI MURI QUI seguendo l'immagine del labirinto -->
  <!-- <div class="wall" style="left: Xpx; top: Ypx; width: Wpx; height: Hpx;"></div> -->
  
</div>

<script>
const player = document.getElementById('player');
const goal = document.getElementById('goal');
const walls = document.querySelectorAll('.wall');
const startX = 30, startY = 150;

// Inizializza posizione
player.style.left = startX + 'px';
player.style.top = startY + 'px';

// Controlla collisione tra due rettangoli
function checkCollision(x1, y1, w1, h1, x2, y2, w2, h2) {
  return !(x1 + w1 < x2 || x1 > x2 + w2 || y1 + h1 < y2 || y1 > y2 + h2);
}

// Muove il giocatore
function move(dx, dy) {
  let currentX = parseInt(player.style.left) || startX;
  let currentY = parseInt(player.style.top) || startY;
  
  const newX = currentX + dx;
  const newY = currentY + dy;
  
  // Controlla collisione con tutti i muri
  for (let wall of walls) {
    const wallX = parseInt(wall.style.left);
    const wallY = parseInt(wall.style.top);
    const wallW = parseInt(wall.style.width);
    const wallH = parseInt(wall.style.height);
    
    if (checkCollision(newX, newY, 15, 15, wallX, wallY, wallW, wallH)) {
      console.log("MURO! Torno all'inizio");
      player.style.left = startX + 'px';
      player.style.top = startY + 'px';
      return;
    }
  }
  
  // Controlla bordi
  if (newX < 0 || newX > 785 || newY < 0 || newY > 585) {
    player.style.left = startX + 'px';
    player.style.top = startY + 'px';
    return;
  }
  
  // Muovi
  player.style.left = newX + 'px';
  player.style.top = newY + 'px';
  
  // Controlla vittoria
  checkWin();
}

// Controlla vittoria
function checkWin() {
  const px = parseInt(player.style.left);
  const py = parseInt(player.style.top);
  const gx = parseInt(goal.style.left) || 730;
  const gy = parseInt(goal.style.top) || 530;
  
  if (checkCollision(px, py, 15, 15, gx, gy, 40, 40)) {
    alert("üéâ HAI VINTO!");
    player.style.left = startX + 'px';
    player.style.top = startY + 'px';
  }
}

// Controllo tastiera
document.addEventListener('keydown', function(e) {
  if (e.key === 'ArrowUp' || e.key === 'w' || e.key === 'W') { e.preventDefault(); move(0, -5); }
  if (e.key === 'ArrowDown' || e.key === 's' || e.key === 'S') { e.preventDefault(); move(0, 5); }
  if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') { e.preventDefault(); move(-5, 0); }
  if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') { e.preventDefault(); move(5, 0); }
});

console.log("‚úì Gioco pronto!");
</script>

</body>
</html>
